{
  "_comment": "⚠️ MANUAL SYNC REQUIRED: This file must be manually updated when Swisper agent graphs change. See reference/swisper/backend/app/api/services/agents/*/build_graph() or _create_workflow() methods. Future: Will be replaced by dynamic reading via SAP (Swisper Admin Protocol) in Phase 5.",
  "_last_sync_date": "2025-11-02",
  "_source": "reference/swisper/backend/app/api/services/agents/",
  "agents": [
    {
      "name": "global_supervisor",
      "description": "Main orchestrator that routes to domain agents and manages conversation flow",
      "nodes": [
        {
          "id": "user_in_the_loop_handler",
          "label": "User Clarification Handler",
          "type": "SPAN"
        },
        {
          "id": "classify_intent",
          "label": "Intent Classification",
          "type": "GENERATION"
        },
        {
          "id": "memory_node",
          "label": "Memory Retrieval",
          "type": "SPAN"
        },
        {
          "id": "indexing",
          "label": "Document Indexing",
          "type": "SPAN"
        },
        {
          "id": "global_planner",
          "label": "Global Planner",
          "type": "GENERATION"
        },
        {
          "id": "agent_execution",
          "label": "Agent Execution",
          "type": "AGENT"
        },
        {
          "id": "user_interface",
          "label": "User Interface",
          "type": "GENERATION"
        }
      ],
      "edges": [
        {
          "from": "classify_intent",
          "to": "memory_node",
          "conditional": false
        },
        {
          "from": "memory_node",
          "to": "indexing",
          "conditional": true,
          "label": "if file uploaded"
        },
        {
          "from": "memory_node",
          "to": "user_interface",
          "conditional": true,
          "label": "if simple_chat"
        },
        {
          "from": "memory_node",
          "to": "global_planner",
          "conditional": true,
          "label": "if complex_chat"
        },
        {
          "from": "indexing",
          "to": "global_planner",
          "conditional": false
        },
        {
          "from": "global_planner",
          "to": "user_interface",
          "conditional": true,
          "label": "if complete/final"
        },
        {
          "from": "global_planner",
          "to": "agent_execution",
          "conditional": true,
          "label": "if needs agent"
        },
        {
          "from": "global_planner",
          "to": "global_planner",
          "conditional": true,
          "label": "if loop"
        },
        {
          "from": "agent_execution",
          "to": "user_interface",
          "conditional": true,
          "label": "if final step"
        },
        {
          "from": "agent_execution",
          "to": "global_planner",
          "conditional": true,
          "label": "if continue"
        },
        {
          "from": "user_interface",
          "to": "user_in_the_loop_handler",
          "conditional": true,
          "label": "if needs clarification"
        },
        {
          "from": "user_in_the_loop_handler",
          "to": "agent_execution",
          "conditional": true,
          "label": "if resume agent"
        },
        {
          "from": "user_in_the_loop_handler",
          "to": "classify_intent",
          "conditional": true,
          "label": "if new question"
        },
        {
          "from": "user_in_the_loop_handler",
          "to": "global_planner",
          "conditional": true,
          "label": "default"
        }
      ]
    },
    {
      "name": "productivity_agent",
      "description": "Email, calendar, and task management agent",
      "nodes": [
        {
          "id": "provider_selection",
          "label": "Provider Selection",
          "type": "SPAN"
        },
        {
          "id": "productivity_planner",
          "label": "Productivity Planner",
          "type": "GENERATION"
        },
        {
          "id": "productivity_write",
          "label": "Productivity Write",
          "type": "GENERATION"
        },
        {
          "id": "tool_execution",
          "label": "Tool Execution",
          "type": "TOOL"
        }
      ],
      "edges": [
        {
          "from": "provider_selection",
          "to": "productivity_planner",
          "conditional": true,
          "label": "if routing phase"
        },
        {
          "from": "productivity_planner",
          "to": "provider_selection",
          "conditional": true,
          "label": "if multi-provider"
        },
        {
          "from": "productivity_planner",
          "to": "productivity_write",
          "conditional": true,
          "label": "if needs write"
        },
        {
          "from": "productivity_planner",
          "to": "tool_execution",
          "conditional": true,
          "label": "if direct execute"
        },
        {
          "from": "productivity_write",
          "to": "productivity_write",
          "conditional": true,
          "label": "if clarification loop"
        },
        {
          "from": "productivity_write",
          "to": "tool_execution",
          "conditional": true,
          "label": "if ready to execute"
        },
        {
          "from": "tool_execution",
          "to": "productivity_planner",
          "conditional": true,
          "label": "if multi-step"
        }
      ]
    },
    {
      "name": "research_agent",
      "description": "Web search and real-time information retrieval agent",
      "nodes": [
        {
          "id": "research_planner",
          "label": "Research Planner",
          "type": "GENERATION"
        },
        {
          "id": "tool_execution",
          "label": "Web Search Tool",
          "type": "TOOL"
        },
        {
          "id": "completion_evaluator",
          "label": "Completion Evaluator",
          "type": "GENERATION"
        }
      ],
      "edges": [
        {
          "from": "research_planner",
          "to": "tool_execution",
          "conditional": true,
          "label": "if needs search"
        },
        {
          "from": "research_planner",
          "to": "completion_evaluator",
          "conditional": true,
          "label": "if evaluate"
        },
        {
          "from": "research_planner",
          "to": "research_planner",
          "conditional": true,
          "label": "if replan"
        },
        {
          "from": "tool_execution",
          "to": "completion_evaluator",
          "conditional": true,
          "label": "if evaluate results"
        },
        {
          "from": "tool_execution",
          "to": "research_planner",
          "conditional": true,
          "label": "if needs refinement"
        },
        {
          "from": "completion_evaluator",
          "to": "research_planner",
          "conditional": true,
          "label": "if incomplete"
        }
      ]
    },
    {
      "name": "wealth_agent",
      "description": "Financial data retrieval and analysis agent",
      "nodes": [
        {
          "id": "wealth_planner",
          "label": "Wealth Planner",
          "type": "GENERATION"
        },
        {
          "id": "tool_execution",
          "label": "Financial Data Tool",
          "type": "TOOL"
        }
      ],
      "edges": [
        {
          "from": "wealth_planner",
          "to": "tool_execution",
          "conditional": true,
          "label": "if needs data"
        },
        {
          "from": "tool_execution",
          "to": "wealth_planner",
          "conditional": true,
          "label": "if refine query"
        }
      ]
    },
    {
      "name": "doc_agent",
      "description": "Document search and RAG (Retrieval-Augmented Generation) agent",
      "nodes": [
        {
          "id": "document_search_planner_node",
          "label": "Document Search Planner",
          "type": "GENERATION"
        },
        {
          "id": "doc_tool_execution_node",
          "label": "Document Retrieval Tool",
          "type": "RETRIEVER"
        }
      ],
      "edges": [
        {
          "from": "document_search_planner_node",
          "to": "doc_tool_execution_node",
          "conditional": true,
          "label": "if execute search"
        },
        {
          "from": "doc_tool_execution_node",
          "to": "document_search_planner_node",
          "conditional": false,
          "label": "evaluate results"
        }
      ]
    },
    {
      "name": "gk_catalog_agent",
      "description": "Retail shopping assistant for DIY projects. Helps users select project types, match materials to catalog products, find items in store, and generate shopping lists with building instructions.",
      "nodes": [
        {
          "id": "availability_check",
          "label": "Availability Check",
          "type": "TOOL"
        },
        {
          "id": "project_discovery",
          "label": "Project Discovery",
          "type": "GENERATION"
        },
        {
          "id": "product_matcher",
          "label": "Product Matcher",
          "type": "GENERATION"
        },
        {
          "id": "store_navigation",
          "label": "Store Navigation",
          "type": "SPAN"
        },
        {
          "id": "shopping_list_builder",
          "label": "Shopping List Builder",
          "type": "GENERATION"
        }
      ],
      "edges": [
        {
          "from": "__start__",
          "to": "availability_check",
          "conditional": true,
          "label": "if simple product query"
        },
        {
          "from": "__start__",
          "to": "project_discovery",
          "conditional": true,
          "label": "if DIY project query"
        },
        {
          "from": "availability_check",
          "to": "__end__",
          "conditional": false
        },
        {
          "from": "project_discovery",
          "to": "project_discovery",
          "conditional": true,
          "label": "if HITL waiting (shelf selection)"
        },
        {
          "from": "project_discovery",
          "to": "product_matcher",
          "conditional": true,
          "label": "if tutorial loaded"
        },
        {
          "from": "project_discovery",
          "to": "__end__",
          "conditional": true,
          "label": "if no tutorial"
        },
        {
          "from": "product_matcher",
          "to": "product_matcher",
          "conditional": true,
          "label": "if HITL waiting (adhesive choice)"
        },
        {
          "from": "product_matcher",
          "to": "store_navigation",
          "conditional": true,
          "label": "if products matched"
        },
        {
          "from": "product_matcher",
          "to": "__end__",
          "conditional": true,
          "label": "if no products"
        },
        {
          "from": "store_navigation",
          "to": "shopping_list_builder",
          "conditional": false
        },
        {
          "from": "shopping_list_builder",
          "to": "__end__",
          "conditional": false
        }
      ]
    }
  ]
}

